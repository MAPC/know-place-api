---
aggregators:
  -
    id: 1
    name: sum_and_moe
    modifier: total
    description: Produces a summation and margin of error for a subset of a universe.
    drop_statement: DROP AGGREGATE IF EXISTS sum_and_moe(anyarray);
    definition: >
      CREATE AGGREGATE sum_and_moe(anyarray)(
          SFUNC     = array_cat_moe
        , STYPE     = anyarray
        , FINALFUNC = _final_sum_and_moe
        , INITCOND  = '{}'
      );

  -
    id: 2
    name: percent
    modifier: percentage of
    description: Takes the percent of two columns (subset and universe).
    drop_statement: DROP AGGREGATE IF EXISTS percent(anyarray)
    definition: >
      CREATE AGGREGATE percent(anyarray)(
          SFUNC     = array_cat  -- see note at end
        , STYPE     = anyarray
        , FINALFUNC = _final_percent
        , INITCOND  = '{}'
      );
