# Read about fixtures at
# http://api.rubyonrails.org/classes/ActiveRecord/Fixtures.html

sum_and_moe:
  name: sum_and_moe
  modifier: total
  description: Produces a summation and margin of error for a subset of a universe.
  operation: >
    DROP AGGREGATE IF EXISTS sum_and_moe(anyarray);
    CREATE AGGREGATE sum_and_moe(anyarray)(
        SFUNC     = array_cat_moe
      , STYPE     = anyarray
      , FINALFUNC = _final_sum_and_moe
      , INITCOND  = '{}'
    );

inc:
  name: inc
  modifier: total
  description: Increases an integer by a value.
  operation: >
    BEGIN
      RETURN i + val;
    END

percent:
  name: percent
  modifier: percentage
  description: Sums a column of percentage (integer or decimal) values.
  operation: >
    SELECT 1 as aba;
